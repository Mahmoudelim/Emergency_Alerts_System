Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\">\r\n\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission\r\n        android:name=\"android.permission.ACCESS_COARSE_LOCATION\"\r\n        tools:ignore=\"WrongManifestParent\" />\r\n    <uses-permission\r\n        android:name=\"android.permission.ACCESS_FINE_LOCATION\"\r\n        tools:ignore=\"WrongManifestParent\" />\r\n    <uses-permission\r\n        android:name=\"android.permission.ACCESS_BACKGROUND_LOCATION\"\r\n        tools:ignore=\"WrongManifestParent\" />\r\n\r\n    <uses-feature\r\n        android:glEsVersion=\"0x0020000\"\r\n        android:required=\"true\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n        android:fullBackupContent=\"@xml/backup_rules\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/Theme.MaterialComponents\"\r\n        tools:targetApi=\"31\">\r\n        <activity\r\n            android:name=\"com.example.emergency_alert_system.EMP.creation.EP_login\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n\r\n        <service\r\n            android:name=\"com.example.emergency_alert_system.MIddle_Layer.checking\"\r\n            android:enabled=\"true\"\r\n            android:exported=\"true\" />\r\n\r\n        <activity\r\n            android:name=\"com.example.emergency_alert_system.user.creation.user_signup\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\"com.example.emergency_alert_system.Doctor.Creation.doctor_login\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\"com.example.emergency_alert_system.user.creation.user_Login\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\"com.example.emergency_alert_system.EMP.creation.ep_Signup\"\r\n            android:exported=\"false\"\r\n            android:label=\"@string/title_activity_user_login\" />\r\n        <activity\r\n            android:name=\"com.example.emergency_alert_system.Doctor.Creation.doctor_Signup\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n\r\n        <service\r\n            android:name=\"com.example.emergency_alert_system.MIddle_Layer.checking\"\r\n            android:enabled=\"true\"\r\n            android:exported=\"true\" />\r\n\r\n        <activity\r\n            android:name=\"com.example.emergency_alert_system.user.UserDachboard\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\"com.example.emergency_alert_system.EMP.EmpDachboard\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\"com.example.emergency_alert_system.Doctor.DoctorDachboard\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\"com.example.emergency_alert_system.MainActivity\"\r\n            android:exported=\"true\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n\r\n        <meta-data\r\n            android:name=\"com.google.android.geo.API_KEY\"\r\n            android:value=\"@string/google_maps_api\" />\r\n        <meta-data\r\n            android:name=\"com.google.android.gms.version\"\r\n            android:value=\"@integer/google_play_services_version\" />\r\n\r\n        <uses-library\r\n            android:name=\"org.apache.http.legacy\"\r\n            android:required=\"false\" />\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
--- a/app/src/main/AndroidManifest.xml	
+++ b/app/src/main/AndroidManifest.xml	
@@ -26,7 +26,19 @@
         android:roundIcon="@mipmap/ic_launcher_round"
         android:supportsRtl="true"
         android:theme="@style/Theme.MaterialComponents"
-        tools:targetApi="31">
+        tools:targetApi="31"
+
+        >
+        <!-- Set custom default icon. This is used when no icon is set for incoming notification messages.
+     See README(https://goo.gl/l4GJaQ) for more. -->
+        <meta-data
+            android:name="com.google.firebase.messaging.default_notification_icon"
+            android:resource="@drawable/app_icon" />
+        <!-- Set color used with incoming notification messages. This is used when no color is set for the incoming
+             notification message. See README(https://goo.gl/6BKBk7) for more. -->
+        <meta-data
+            android:name="com.google.firebase.messaging.default_notification_color"
+            android:resource="@color/primaryColor" />
         <activity
             android:name="com.example.emergency_alert_system.EMP.creation.EP_login"
             android:exported="false">
@@ -112,7 +124,12 @@
                 android:name="android.app.lib_name"
                 android:value="" />
         </activity>
-
+        <service android:name="com.example.emergency_alert_system.MIddle_Layer.firebaseMessagingService"
+            android:exported="true">
+            <intent-filter>
+                <action android:name="com.google.firebase.MESSAGING_EVENT"/>
+            </intent-filter>
+        </service>
         <meta-data
             android:name="com.google.android.geo.API_KEY"
             android:value="@string/google_maps_api" />
Index: app/src/main/res/layout/notification.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/notification.xml b/app/src/main/res/layout/notification.xml
new file mode 100644
--- /dev/null	
+++ b/app/src/main/res/layout/notification.xml	
@@ -0,0 +1,57 @@
+<?xml version="1.0" encoding="utf-8"?>
+<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
+    android:layout_width="match_parent"
+    android:layout_height="match_parent"
+    xmlns:app="http://schemas.android.com/apk/res-auto">
+    <com.google.android.material.imageview.ShapeableImageView
+        android:id="@+id/notification_image"
+        android:layout_width="80dp"
+        android:layout_height="80dp"
+        android:adjustViewBounds="true"
+        android:scaleType="centerCrop"
+        android:src="@drawable/user"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        app:shapeAppearanceOverlay="@style/RoundCorner" />
+
+    <TextView
+        android:id="@+id/not_title"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:text="Patient Name  "
+        android:textColor="@color/white"
+        android:textSize="16sp"
+        android:textStyle="bold"
+        app:layout_constraintStart_toEndOf="@+id/notification_image"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintTop_toTopOf="parent"
+        android:layout_marginTop="8dp"
+        android:layout_marginStart="12dp"
+        android:layout_marginEnd="32dp"
+        />
+
+    <TextView
+        android:id="@+id/not_message"
+        android:layout_width="0dp"
+        android:layout_height="wrap_content"
+        android:layout_marginStart="12dp"
+        android:layout_marginEnd="32dp"
+        android:text="Status"
+        android:textColor="@color/white"
+        android:textSize="16sp"
+        android:textStyle="bold"
+        app:layout_constraintBottom_toTopOf="@id/view"
+        app:layout_constraintEnd_toEndOf="parent"
+        app:layout_constraintStart_toEndOf="@+id/notification_image"
+        app:layout_constraintTop_toBottomOf="@+id/not_title" />
+    <View
+        android:id="@+id/view"
+        android:layout_width="match_parent"
+        android:layout_height="1dp"
+        android:layout_margin="8dp"
+        app:layout_constraintStart_toStartOf="parent"
+        app:layout_constraintTop_toBottomOf="@+id/notification_image"
+        android:background="#0000FF"
+        />
+
+</androidx.constraintlayout.widget.ConstraintLayout>
\ No newline at end of file
Index: app/src/main/java/com/example/emergency_alert_system/MIddle_Layer/FirebaseMessagingService.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/emergency_alert_system/MIddle_Layer/FirebaseMessagingService.kt b/app/src/main/java/com/example/emergency_alert_system/MIddle_Layer/FirebaseMessagingService.kt
new file mode 100644
--- /dev/null	
+++ b/app/src/main/java/com/example/emergency_alert_system/MIddle_Layer/FirebaseMessagingService.kt	
@@ -0,0 +1,61 @@
+package com.example.emergency_alert_system.MIddle_Layer
+
+import android.annotation.SuppressLint
+import android.app.Notification
+import android.app.NotificationChannel
+import android.app.NotificationManager
+import android.app.PendingIntent
+import android.content.Context
+import android.content.Intent
+import android.os.Build
+import android.util.Log
+import android.widget.RemoteViews
+import android.widget.RemoteViews.RemoteView
+import androidx.core.app.NotificationCompat
+import com.example.emergency_alert_system.MainActivity
+import com.example.emergencyalertsystem.R
+import com.google.firebase.messaging.FirebaseMessagingService
+import com.google.firebase.messaging.RemoteMessage
+
+const val channelId="notification_channel"
+const val channelName="com.example.emergency_alert_system.MIddle_Layer"
+class firebaseMessagingService :FirebaseMessagingService(){
+@SuppressLint("RemoteViewLayout")
+fun getRemoteView(title: String, message: String):RemoteViews{
+ val remoteView=RemoteViews("com.example.emergency_alert_system.MIddle_Layer",R.layout.notification)
+remoteView.setTextViewText(R.id.not_title,title)
+ remoteView.setTextViewText(R.id.not_message,message)
+ remoteView.setImageViewResource(R.id.notification_image,R.drawable.app_icon)
+return remoteView
+}
+
+ override fun onMessageReceived(message: RemoteMessage) {
+  if (message.getNotification() !=null)
+  {
+   generateNotification(message.notification!!.title!!,message.notification!!.body!!)
+
+  }
+ }
+
+ fun generateNotification(title:String,message:String){
+  val intent=Intent(this,MainActivity::class.java)
+  intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)
+  val pendingIntent= PendingIntent.getActivity(this,0,intent,PendingIntent.FLAG_ONE_SHOT)
+  var builder:NotificationCompat.Builder=NotificationCompat.Builder(applicationContext, channelId)
+   .setSmallIcon(R.drawable.app_icon)
+   .setAutoCancel(true)
+   .setVibrate(longArrayOf(1000,1000,1000,1000))
+   .setOnlyAlertOnce(true)
+   .setContentIntent(pendingIntent)
+  builder=builder.setContent(getRemoteView(title,message))
+  val notificationManager=getSystemService(Context.NOTIFICATION_SERVICE)as NotificationManager
+  if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.O)
+  {
+   val notificationChannel=NotificationChannel(channelId, channelName,NotificationManager.IMPORTANCE_HIGH)
+   notificationManager.createNotificationChannel(notificationChannel)
+  }
+  notificationManager.notify(0,builder.build())
+
+ }
+
+}
\ No newline at end of file
Index: app/google-services.json
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/google-services.json b/app/google-services.json
new file mode 100644
--- /dev/null	
+++ b/app/google-services.json	
@@ -0,0 +1,40 @@
+{
+  "project_info": {
+    "project_number": "610437980706",
+    "firebase_url": "https://emergency-alert-system-final-default-rtdb.firebaseio.com",
+    "project_id": "emergency-alert-system-final",
+    "storage_bucket": "emergency-alert-system-final.appspot.com"
+  },
+  "client": [
+    {
+      "client_info": {
+        "mobilesdk_app_id": "1:610437980706:android:c4e9b9e60b4bc5c1b9e07b",
+        "android_client_info": {
+          "package_name": "com.example.emergencyalertsystem"
+        }
+      },
+      "oauth_client": [
+        {
+          "client_id": "610437980706-nbogc71oc13ko651nepa9ou2q6v718nf.apps.googleusercontent.com",
+          "client_type": 3
+        }
+      ],
+      "api_key": [
+        {
+          "current_key": "AIzaSyAblJBvZ6-OZTm8g7HCtW1blTZySrphpQU"
+        }
+      ],
+      "services": {
+        "appinvite_service": {
+          "other_platform_oauth_client": [
+            {
+              "client_id": "610437980706-nbogc71oc13ko651nepa9ou2q6v718nf.apps.googleusercontent.com",
+              "client_type": 3
+            }
+          ]
+        }
+      }
+    }
+  ],
+  "configuration_version": "1"
+}
\ No newline at end of file
